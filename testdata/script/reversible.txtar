# Test -reversible flag controls obfuscation reversibility

# Test 1: Default build (irreversible mode)
exec garble -literals build -o secure$exe
exec ./secure$exe
stdout 'Secret: testdata123'

! binsubstr secure$exe 'testdata123'

# Test 2: Build with -reversible flag
exec garble -reversible -literals build -o reversible$exe
exec ./reversible$exe
stdout 'Secret: testdata123'

! binsubstr reversible$exe 'testdata123'

[short] stop

-- go.mod --
module test/rev

go 1.23

-- test.go --
package main

import "fmt"

const secretData = "testdata123"

func main() {
fmt.Println("Secret:", secretData)
}
